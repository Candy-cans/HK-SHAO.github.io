<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Shao's Blog"><title>STM32替换Arduino直通车 | HK-SHAO</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.2"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">STM32替换Arduino直通车</h1><a id="logo" href="/.">HK-SHAO</a><p class="description">烧风的小站</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">STM32替换Arduino直通车</h1><div class="post-meta">2018-02-12</div><div class="post-content"><h2 id="前言（废话较多，可直接滚动到教程）"><a href="#前言（废话较多，可直接滚动到教程）" class="headerlink" title="前言（废话较多，可直接滚动到教程）"></a>前言（废话较多，可直接滚动到教程）</h2><p>众所周知，用Arduino进行开发简单快捷，一个项目能很快的做好，而Arduino相比STM32，贵且性价比也很低，Arduino Uno可用的针脚也少得可怜，怎么办？？换做STM32吧！STM32高性能，STM32的最小系统版价格很低，对我这种穷学生来说是福利啊！于是我兴致勃勃的淘了STM32的最小系统版准备入坑STM32。<br><img src="/images/old/20180212223411665.png" alt=""><br>可接下来我就要下载各种各样的软件进行编程，烧录，写个最简单的Blink程序都非常麻烦，折腾我一天。<br><img src="/images/old/20180212223612518.png" alt=""></p>
<p>要是能像Arduino一样简单方便快捷就好了，怎么办呢？那么现在正式开始教程！  </p>
<h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><p>1，STM32最小系统板，配套数据线，20元以下的就可以了。<br>2，Arduino（不是必须，但如果你不想买USB转TTL就可以把Arduino用作USB转TTL）或者USB转TTL模块一个。<br>3，跳线数根。  </p>
<h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><h3 id="1，配置Arduino并下载所需的文件"><a href="#1，配置Arduino并下载所需的文件" class="headerlink" title="1，配置Arduino并下载所需的文件"></a>1，配置Arduino并下载所需的文件</h3><p>首先我们下载这个人开源的Arduino-STM32项目<br><img src="/images/old/20180212224019567.png" alt=""></p>
<p>下载下来并解压<br><img src="/images/old/20180212224136393.png" alt=""></p>
<p>Arduino快捷方式右键打开文件所在位置，将解压下来的文件移动到如下图所示目录，并将文件夹改名为STM32  </p>
<p><img src="/images/old/2018021222442253.png" alt=""></p>
<p>接下来是重点，打开Arduino，进入开发板管理器，安装如下图所示的开发板文件<br><img src="/images/old/20180212224925891.png" alt=""></p>
<p><img src="/images/old/20180212224934382.png" alt=""></p>
<p>安装完后选择你的STM32开发板型号<br><img src="/images/old/20180212225143511.png" alt=""></p>
<p>Arduino新建一个空文件，点击左上角的验证按钮，看看能不能编译，如果可以就继续<br><img src="/images/old/20180212225343736.png" alt=""></p>
<h3 id="2，为STM32下载和烧写Bootloader"><a href="#2，为STM32下载和烧写Bootloader" class="headerlink" title="2，为STM32下载和烧写Bootloader"></a>2，为STM32下载和烧写Bootloader</h3><p>接下来我们需要用USB转TTL给STM32烧录Bootloader，首先我们要下载Bootloader，进入刚刚那个人的另一个开源项目，这个地址：<br><a href="https://github.com/rogerclarkmelbourne/STM32duino-bootloader/tree/master/binaries" target="_blank" rel="noopener">https://github.com/rogerclarkmelbourne/STM32duino-bootloader/tree/master/binaries</a><br>选择你的STM32最小系统板的D2所对应的接口名字的文件下载（一定要选择对应的）<br>比如我这里找到开发板的原理图，D1是通电后的指示灯，D2是另外的LED灯，它连接了PC13针脚<br><img src="/images/old/20180212231101575.png" alt=""></p>
<p>那么我就选择这个文件下载<br><img src="/images/old/20180213091017599.png" alt=""></p>
<p>下载完成后，我们要烧录这个文件到STM32里，我们先下载所需要的软件，叫做FlyMcu<br>下载地址：<a href="https://pan.baidu.com/s/1bqkVY6j" target="_blank" rel="noopener">https://pan.baidu.com/s/1bqkVY6j</a><br>密码：vygm<br><img src="/images/old/20180212231344298.png" alt=""></p>
<p>然后，这里我用Arduino代替USB转TTL进行烧录，降低额外的成本。  </p>
<p>需要注意的是，STM32的BOOT0要接上VCC高电平，BOOT1要接上GND低电平，然后按STM32版上的REST按钮使之重启进入ISP下载模式，我们才可以烧录Bootloader进去（重要）。<br><img src="/images/old/20180212231443230.png" alt=""></p>
<p>然后我们还可以看到，PA9是TX，PA10是RX。STM32的TX连接Arduino的RX（0接口），STM32的RX连接Aruidno的TX（1接口）。<br>紧接着，如果要把Arduino用作USB转TTL一定要把Arudino的RST接口一直连接Arduino的GND！Arduino连接电脑，STM32也要供电！<br><img src="/images/old/20180213085701247.png" alt=""></p>
<p>OK，恭喜你来到了这一步，接下来我们要用FlyMcu烧录程序，但FlyMcu无法烧录.bin文件（可以打开但无法烧录），这时我们要需要把刚刚下载下来的Bootloader从.bin文件转换成.hex文件进行烧录！<br>所以我们还需要一个软件，来完成这个操作，叫做BinToHex。<br>下载地址：<a href="https://pan.baidu.com/s/1kWkFGgB" target="_blank" rel="noopener">https://pan.baidu.com/s/1kWkFGgB</a><br>密码：ox9g<br><img src="/images/old/20180212232649347.png" alt=""></p>
<p>选择我们刚刚下载的bootloader文件，然后选择文件夹导出成.hex文件，随便取个名字。<br><img src="/images/old/20180212233012739.png" alt=""></p>
<p>这时我们还需要很重要的一步，将生成的.hex文件用文本编辑器打开，将第一行的:020000040000FA更改成:020000040800F2（非常非常重要）<br><img src="/images/old/20180212233210726.png" alt=""><br><img src="/images/old/20180212233301486.png" alt=""></p>
<p>紧接着保存退出，我们打开FlyMcu，选择已经修改好的.hex文件，点击开始编程<br><img src="/images/old/20180212233522280.png" alt=""></p>
<p>注意，如果长时间无法连接，请按STM32版上的RST按钮或者断电重试！<br>如果烧录Bootloader成功，并且STM32版是通过USB连接电脑供电的话，你的电脑会提示你USB设备异常，这是没用安装正确的驱动造成的，我们打开设备管理器看一下<br><img src="/images/old/20180212234255248.png" alt=""></p>
<h3 id="3，为电脑安装连接STM32的驱动"><a href="#3，为电脑安装连接STM32的驱动" class="headerlink" title="3，为电脑安装连接STM32的驱动"></a>3，为电脑安装连接STM32的驱动</h3><p>解决这个问题，接下来我们安装驱动程序。<br>进入我们之前下载的文件目录，点击下图所示的.bat文件安装驱动，一定要要管理员身份运行<br><img src="/images/old/20180212234056339.png" alt=""><br><img src="/images/old/20180212234316118.png" alt=""></p>
<p>success就是成功了，我们按STM32上的RST键，随着电脑的提示音，这时我们再看看设备管理器<br><img src="/images/old/20180212234529384.png" alt=""></p>
<p>我们发现多了一个串口，如果不行就重启电脑试一试。  </p>
<h3 id="4，用Arduino-IDE为STM32烧录Blink程序"><a href="#4，用Arduino-IDE为STM32烧录Blink程序" class="headerlink" title="4，用Arduino IDE为STM32烧录Blink程序"></a>4，用Arduino IDE为STM32烧录Blink程序</h3><p>最后我们打开Aruidno IDE，选择上传程序的模式，如下图<br><img src="/images/old/20180212234657966.png" alt=""></p>
<p>然后写入一个Blink程序  </p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="built_in">setup</span>() &#123;</span><br><span class="line">  <span class="built_in">pinMode</span>(PC14, <span class="literal">OUTPUT</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">loop</span>() &#123;</span><br><span class="line">  <span class="built_in">digitalWrite</span>(PC14, <span class="literal">HIGH</span>);</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">50</span>);</span><br><span class="line">  <span class="built_in">digitalWrite</span>(PC14, <span class="literal">LOW</span>);</span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">50</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/old/20180212234804771.png" alt=""></p>
<p>随着红色的“Done！”和电脑一声USB提示，STM32自动重启，然后连接在STM32PC14接口上的LED开始闪烁了！  </p>
<p><img src="/images/old/20180213085810319.png" alt=""></p>
<p>以后我们不需要额外的硬件，直接用数据线连接STM32最小系统版和电脑，并打开Arduino IDE就可以像玩Arduino一样简单方便快捷了！  </p>
</div><div class="tags"><a href="/tags/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/"><i class="fa fa-tag"></i>硬件开发</a><a href="/tags/Arduino/"><i class="fa fa-tag"></i>Arduino</a><a href="/tags/STM32/"><i class="fa fa-tag"></i>STM32</a></div><div class="post-nav"><a class="pre" href="/post/ce2c9ccf.html">Python-数字黑洞</a><a class="next" href="/post/b560a27.html">Arduino-用声音传感器制作简单的“声纹锁”</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E7%89%A9%E7%90%86/" style="font-size: 15px;">物理</a> <a href="/tags/%E7%A8%8B%E5%BA%8F-%E7%AE%97%E6%B3%95/" style="font-size: 15px;">程序&算法</a> <a href="/tags/%E7%9D%80%E8%89%B2%E5%99%A8/" style="font-size: 15px;">着色器</a> <a href="/tags/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/" style="font-size: 15px;">硬件开发</a> <a href="/tags/Arduino/" style="font-size: 15px;">Arduino</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 15px;">数学</a> <a href="/tags/C-C/" style="font-size: 15px;">C/C++</a> <a href="/tags/STM32/" style="font-size: 15px;">STM32</a> <a href="/tags/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">实用工具</a> <a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 15px;">视频</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 15px;">教程</a> <a href="/tags/%E5%89%AA%E8%BE%91/" style="font-size: 15px;">剪辑</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 15px;">软件</a> <a href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" style="font-size: 15px;">可视化</a> <a href="/tags/%E4%B8%8D%E7%AD%89%E5%BC%8F/" style="font-size: 15px;">不等式</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 15px;">英语</a> <a href="/tags/mp3/" style="font-size: 15px;">mp3</a> <a href="/tags/%E9%AB%98%E4%B8%AD/" style="font-size: 15px;">高中</a> <a href="/tags/%E9%AB%98%E8%80%83/" style="font-size: 15px;">高考</a> <a href="/tags/%E7%AD%89%E5%BC%8F/" style="font-size: 15px;">等式</a> <a href="/tags/%E8%AF%81%E6%98%8E/" style="font-size: 15px;">证明</a> <a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 15px;">转载</a> <a href="/tags/%E5%88%86%E5%BD%A2/" style="font-size: 15px;">分形</a> <a href="/tags/%E6%B8%B2%E6%9F%93/" style="font-size: 15px;">渲染</a> <a href="/tags/PDF/" style="font-size: 15px;">PDF</a> <a href="/tags/OpenGL/" style="font-size: 15px;">OpenGL</a> <a href="/tags/%E5%8A%9B%E5%AD%A6/" style="font-size: 15px;">力学</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 15px;">编程</a> <a href="/tags/%E6%BC%94%E8%AE%B2/" style="font-size: 15px;">演讲</a> <a href="/tags/PPT/" style="font-size: 15px;">PPT</a> <a href="/tags/Mathematica/" style="font-size: 15px;">Mathematica</a> <a href="/tags/%E5%BE%AE%E7%A7%AF%E5%88%86/" style="font-size: 15px;">微积分</a> <a href="/tags/%E7%8C%9C%E6%83%B3/" style="font-size: 15px;">猜想</a> <a href="/tags/%E5%85%AC%E5%91%8A/" style="font-size: 15px;">公告</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 15px;">笔记</a> <a href="/tags/%E6%9D%82%E6%96%87/" style="font-size: 15px;">杂文</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">人工智能</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/TensorFlow/" style="font-size: 15px;">TensorFlow</a> <a href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" style="font-size: 15px;">数学建模</a> <a href="/tags/%E7%94%9F%E7%89%A9/" style="font-size: 15px;">生物</a> <a href="/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/" style="font-size: 15px;">思维导图</a> <a href="/tags/%E7%BB%9F%E8%AE%A1/" style="font-size: 15px;">统计</a> <a href="/tags/Office/" style="font-size: 15px;">Office</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%88%9B%E9%80%A0/" style="font-size: 15px;">机器创造</a> <a href="/tags/%E6%B7%B7%E6%B2%8C/" style="font-size: 15px;">混沌</a> <a href="/tags/%E8%87%AA%E6%88%91%E6%8C%87%E6%B6%89/" style="font-size: 15px;">自我指涉</a> <a href="/tags/%E4%B8%87%E7%89%A9%E7%90%86%E8%AE%BA/" style="font-size: 15px;">万物理论</a> <a href="/tags/Javascript/" style="font-size: 15px;">Javascript</a> <a href="/tags/Html/" style="font-size: 15px;">Html</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/post/d276a83c.html">绘图计算器Plotter</a></li><li class="post-list-item"><a class="post-list-link" href="/post/ad4edb90.html">混沌、分形和自我指涉</a></li><li class="post-list-item"><a class="post-list-link" href="/post/7dedd90d.html">【manim动画制作】如何求解sinx=2？</a></li><li class="post-list-item"><a class="post-list-link" href="/post/5436d5f4.html">光标画图程序</a></li><li class="post-list-item"><a class="post-list-link" href="/post/6724749f.html">第一次剪视频（动漫AMV）</a></li><li class="post-list-item"><a class="post-list-link" href="/post/29d0182b.html">分享班级里演讲用的PPT</a></li><li class="post-list-item"><a class="post-list-link" href="/post/5d2efed2.html">为MP3做一个英语词典</a></li><li class="post-list-item"><a class="post-list-link" href="/post/81c4e30a.html">英语语法</a></li><li class="post-list-item"><a class="post-list-link" href="/post/ee4d30bf.html">高三理科生的学习总结</a></li><li class="post-list-item"><a class="post-list-link" href="/post/e688be20.html">我收藏的一些网站</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/HK-SHAO" title="我的Github主页" target="_blank">我的Github主页</a><ul></ul><a href="https://space.bilibili.com/24046148" title="我的哔哩哔哩主页" target="_blank">我的哔哩哔哩主页</a><ul></ul><a href="https://wuyudi.github.io/" title="wuyudi的小站" target="_blank">wuyudi的小站</a><ul></ul><a href="https://github.com/manim-kindergarten" title="manim-kindergarten" target="_blank">manim-kindergarten</a><ul></ul><a href="https://tony031218.github.io/" title="鹤翔万里的博客" target="_blank">鹤翔万里的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">HK-SHAO</a></div></div></div><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.2"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.2"></script></div></body></html>
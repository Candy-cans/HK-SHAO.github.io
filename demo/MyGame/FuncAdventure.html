<title>函数大冒险（开发中v1.2）</title>
<style>#gc {border-style:dotted;}</style>
<body style="text-align: center">
<canvas id="gc"></canvas>
<h2>输入表达式</h2>
<textarea id="ed" oninput="inChange()" cols="50" rows="5" warp="virtual"></textarea>
<br><br>
<button id="bu" onclick="buOnClick()" disabled="true">下一关</button>
</body>
<script type="text/javascript">
    canv = document.getElementById("gc");
    ctx = canv.getContext("2d");
    ined = document.getElementById("ed");
    mes = document.getElementById("mes");
    bu = document.getElementById("bu");

    x=2;y=2;
    size = Math.min(document.body.clientWidth, document.body.clientHeight)/2;
    canv.width = size;
    canv.height = size;

    reCanvas();
    ined.value = "pow((pow((2*x),2)+pow((2*y),2)-1),3)<pow((2*x),2)*pow((2*y),3)";//
    plot(ined.value, "black");//
    function format(s){
        str = s.replace(/abs/g, "Math.abs")
                .replace(/acos/g, "Math.acos")
                .replace(/asin/g, "Math.asin")
                .replace(/atan/g, "Math.atan")
                .replace(/atan2/g, "Math.atan2")
                .replace(/ceil/g, "Math.ceil")
                .replace(/cos/g, "Math.cos")
                .replace(/exp/g, "Math.exp")
                .replace(/floor/g, "Math.floor")
                .replace(/log/g, "Math.log")
                .replace(/max/g, "Math.max")
                .replace(/min/g, "Math.min")
                .replace(/pow/g, "Math.pow")
                .replace(/random/g, "Math.random")
                .replace(/round/g, "Math.round")
                .replace(/sin/g, "Math.sin")
                .replace(/sqrt/g, "Math.sqrt")
                .replace(/tan/g, "Math.tan")//
                .replace(/E/g, "Math.E")
                .replace(/LN2/g, "Math.LN2")
                .replace(/LN10/g, "Math.LN10")
                .replace(/PI/g, "Math.PI")
                .replace(/SQRT2/g, "Math.SQRT2");
        return str;
    }

    function buOnClick(){
    }

    function reCanvas(){
        ctx.fillStyle = "white";
        ctx.fillRect(0,0,canv.width,canv.height);
        ctx.strokeStyle = 'gray';
        ctx.moveTo(size/2, 0);
        ctx.lineTo(size/2, size);
        ctx.moveTo(0, size/2);
        ctx.lineTo(size, size/2);
        ctx.stroke();
    }

    function plot(str, color){
        ex = format(str);
        try {
            outeval = eval(ex);
        }
        catch(err) {
            return;
        }
        reCanvas();
        ctx.fillStyle = color;
        if(typeof outeval == "boolean") {
          jd = size/200;
          for(var i=0;i<=size;i+=jd) {
            for(var j=0;j<=size;j+=jd) {
              x = (2*i-size)/size;
              y = -(2*j-size)/size;
              if(eval(ex) == true){
                ctx.fillRect(i,j,jd/2,jd/2);
              }
            }
          }
        } else if(typeof outeval == "number") {
          for(var i=-2000;i<=2000;i++){
            x = i/2000; //[-1,1]
            y = eval(ex);
            y = (1-y)*size*0.5;
            x = (x+1)*0.5*size
            ctx.fillRect(x-1,y-1,2,2);
          }
        }
    }

    function inChange(){
        if(ined.value==""){
            reCanvas();
            return;
        }
        plot(ined.value, "black");
    }
</script>
<br><br>
<p align="left">
这个程序是用html的canvas和javascript写的，也是我写的第一个javascript程序<br>
你每改变一次输入框里的内容就会执行一次javascript的eval函数<br>
所以理论上你可以在输入框输入并运行javascript代码（调用Math库的不用Math.）<br>
表达式只要返回的是number或者boolean就可以绘制图像，下面是Math库的函数说明
</p>
<h3 align="left">Math 对象属性</h3>
<table class="reference">
    <tbody><tr>
    <th width="20%" align="left">属性</th>
        <th width="80%" align="left">描述</th>
      </tr>
    <tr>
    <td><a></a>E</a></td>
        <td>返回自然对数的底数（约等于2.718）</td>
      </tr>
    <tr>
    <td><a>LN2</a></td>
        <td>返回 2 的自然对数（约等于0.693）</td>
      </tr>
    <tr>
    <td><a>LN10</a></td>
        <td>返回 10 的自然对数（约等于2.302）</td>
      </tr>
    <tr>
    <td><a>PI</a></td>
        <td>返回圆周率（约等于3.14159）</td>
      </tr>
    <tr>
    <td><a>SQRT2</a></td>
        <td>返回 2 的平方根（约等于 1.414）</td>
      </tr>
    </tbody>
</table>
<h3 align="left">Math 对象方法</h3>
<table class="reference">
    <tbody><tr>
    <th width="20%" align="left">属性</th>
        <th width="80%" align="left">描述</th>
      </tr>
    <tr>
        <td><a>abs(x)</a></td>
        <td>返回 x 的绝对值</td>
      </tr>
    <tr>
    <td><a>acos(x)</a></td>
        <td>返回 x 的反余弦值</td>
      </tr>
    <tr>
    <td><a>asin(x)</a></td>
        <td>返回 x 的反正弦值</td>
      </tr>
    <tr>
    <td><a>atan(x)</a></td>
        <td>以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值</td>
      </tr>
    <tr>
    <td><a>atan2(y,x)</a></td>
        <td>返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）</td>
      </tr>
    <tr>
    <td><a>ceil(x)</a></td>
        <td>对数进行上舍入</td>
      </tr>
    <tr>
    <td><a>cos(x)</a></td>
        <td>返回数的余弦</td>
      </tr>
    <tr>
    <td><a>exp(x)</a></td>
        <td>返回 E 的 x 次幂
    </td>
      </tr>
    <tr>
    <td><a>floor(x)</a></td>
        <td>对 x 进行下舍入</td>
      </tr>
    <tr>
    <td><a>log(x)</a></td>
        <td>返回数的自然对数（底为e）</td>
      </tr>
    <tr>
    <td><a>max(x,y,z,...,n)</a></td>
        <td>返回 x,y,z,...,n 中的最高值</td>
      </tr>
    <tr>
    <td><a>min(x,y,z,...,n)</a></td>
        <td>返回 x,y,z,...,n中的最低值</td>
      </tr>
    <tr>
    <td><a>pow(x,y)</a></td>
        <td>返回 x 的 y 次幂</td>
      </tr>
    <tr>
    <td><a>random()</a></td>
        <td>返回 0 ~ 1 之间的随机数</td>
      </tr>
    <tr>
    <td><a>round(x)</a></td>
        <td>四舍五入</td>
      </tr>
    <tr>
    <td><a>sin(x)</a></td>
        <td>返回数的正弦</td>
      </tr>
    <tr>
    <td><a>sqrt(x)</a></td>
        <td>返回数的平方根</td>
      </tr>
    <tr>
    <td><a>tan(x)</a></td>
        <td>返回角的正切</td>
      </tr>
    </tbody>
</table>
<title>函数大冒险</title>
<style>canvas.dotted {border-style:dotted;}</style>
<body style="text-align: center">
<canvas class="dotted" id="gc" width="500" height="500"></canvas>
<h2>输入函数</h2>
<input id="ed" type="text" oninput="inChange()">
<br><br>
<button type="button" onclick="buOnClick()" disabled="disabled">下一关</button>
</body>
<script type="text/javascript">
    canv = document.getElementById("gc");
    ctx = canv.getContext("2d");
    ined = document.getElementById("ed");

    x=2;y=2;
    size = Math.min(document.body.clientWidth, document.body.clientHeight)/2;
    canv.width = size;
    canv.height = size;
    reCanvas();
    function format(s){
        str = s.replace(/abs/g, "Math.abs")
                .replace(/acos/g, "Math.acos")
                .replace(/asin/g, "Math.asin")
                .replace(/atan/g, "Math.atan")
                .replace(/atan2/g, "Math.atan2")
                .replace(/ceil/g, "Math.ceil")
                .replace(/cos/g, "Math.cos")
                .replace(/exp/g, "Math.exp")
                .replace(/floor/g, "Math.floor")
                .replace(/log/g, "Math.log")
                .replace(/max/g, "Math.max")
                .replace(/min/g, "Math.min")
                .replace(/pow/g, "Math.pow")
                .replace(/random/g, "Math.random")
                .replace(/round/g, "Math.round")
                .replace(/sin/g, "Math.sin")
                .replace(/sqrt/g, "Math.sqrt")
                .replace(/tan/g, "Math.tan")//
                .replace(/E/g, "Math.E")
                .replace(/LN2/g, "Math.LN2")
                .replace(/LN10/g, "Math.LN10")
                .replace(/PI/g, "Math.PI")
                .replace(/SQRT2/g, "Math.SQRT2");
        return str;
    }

    function buOnClick(){
        alert("下一关")
    }

    function reCanvas(){
        x=2;y=2;
        ctx.fillStyle = "white";
        ctx.fillRect(0,0,canv.width,canv.height);
        ctx.strokeStyle = 'gray';
        ctx.moveTo(size/2, 0);
        ctx.lineTo(size/2, size);
        ctx.moveTo(0, size/2);
        ctx.lineTo(size, size/2);
        ctx.stroke();
    }

    function inChange(){
        if(ined.value==""){
            reCanvas();
            return;
        }
        ex = format(ined.value);
        try {
            outeval = eval(ex);
            if (typeof outeval != "number"){
                return;
            }
        }
        catch(err) {
            return;
        }
        reCanvas(); //claer canvas
        for(var i=-2000;i<=2000;i++){
            x = i/2000; //[-1,1]
            y = eval(ex);
            y = (1-y)*size*0.5;
            x = (x+1)*0.5*size
            ctx.fillStyle = "black";
            ctx.fillRect(x-1,y-1,2,2);
        }
    }
</script>

<br><br><br>
<h2 align="left">Math 对象属性</h2>
<table class="reference">
    <tbody><tr>
    <th width="20%" align="left">属性</th>
        <th width="80%" align="left">描述</th>
      </tr>
    <tr>
    <td><a></a>E</a></td>
        <td>返回自然对数的底数（约等于2.718）</td>
      </tr>
    <tr>
    <td><a>LN2</a></td>
        <td>返回 2 的自然对数（约等于0.693）</td>
      </tr>
    <tr>
    <td><a>LN10</a></td>
        <td>返回 10 的自然对数（约等于2.302）</td>
      </tr>
    <tr>
    <td><a>PI</a></td>
        <td>返回圆周率（约等于3.14159）</td>
      </tr>
    <tr>
    <td><a>SQRT2</a></td>
        <td>返回 2 的平方根（约等于 1.414）</td>
      </tr>
    </tbody>
</table>
<h2 align="left">Math 对象方法</h2>
<table class="reference">
    <tbody><tr>
    <th width="20%" align="left">属性</th>
        <th width="80%" align="left">描述</th>
      </tr>
    <tr>
        <td><a>abs(x)</a></td>
        <td>返回 x 的绝对值</td>
      </tr>
    <tr>
    <td><a>acos(x)</a></td>
        <td>返回 x 的反余弦值</td>
      </tr>
    <tr>
    <td><a>asin(x)</a></td>
        <td>返回 x 的反正弦值</td>
      </tr>
    <tr>
    <td><a>atan(x)</a></td>
        <td>以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值</td>
      </tr>
    <tr>
    <td><a>atan2(y,x)</a></td>
        <td>返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）</td>
      </tr>
    <tr>
    <td><a>ceil(x)</a></td>
        <td>对数进行上舍入</td>
      </tr>
    <tr>
    <td><a>cos(x)</a></td>
        <td>返回数的余弦</td>
      </tr>
    <tr>
    <td><a>exp(x)</a></td>
        <td>返回  E<sup>x</sup> 的指数
    </td>
      </tr>
    <tr>
    <td><a>floor(x)</a></td>
        <td>对 x 进行下舍入</td>
      </tr>
    <tr>
    <td><a>log(x)</a></td>
        <td>返回数的自然对数（底为e）</td>
      </tr>
    <tr>
    <td><a>max(x,y,z,...,n)</a></td>
        <td>返回 x,y,z,...,n 中的最高值</td>
      </tr>
    <tr>
    <td><a>min(x,y,z,...,n)</a></td>
        <td>返回 x,y,z,...,n中的最低值</td>
      </tr>
    <tr>
    <td><a>pow(x,y)</a></td>
        <td>返回 x 的 y 次幂</td>
      </tr>
    <tr>
    <td><a>random()</a></td>
        <td>返回 0 ~ 1 之间的随机数</td>
      </tr>
    <tr>
    <td><a>round(x)</a></td>
        <td>四舍五入</td>
      </tr>
    <tr>
    <td><a>sin(x)</a></td>
        <td>返回数的正弦</td>
      </tr>
    <tr>
    <td><a>sqrt(x)</a></td>
        <td>返回数的平方根</td>
      </tr>
    <tr>
    <td><a>tan(x)</a></td>
        <td>返回角的正切</td>
      </tr>
    </tbody>
</table>